{"ast":null,"code":"import _slicedToArray from\"/media/chitts/8a6ff761-51df-41f4-b853-3a5fcd07a873/MERN/Dev_workspace/feedbackui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState,useContext,useEffect}from'react';import Card from'./shared/Card';import Button from'./shared/Button';import RatingSelect from'./RatingSelect';import FeedbackContext from'../context/FeedbackContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function FeedbackForm(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),btnDisabled=_useState4[0],setBtnDisabled=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(10),_useState8=_slicedToArray(_useState7,2),rating=_useState8[0],setRating=_useState8[1];var _useContext=useContext(FeedbackContext),addFeedback=_useContext.addFeedback,feedbackEdit=_useContext.feedbackEdit;useEffect(function(){if(feedbackEdit.edit===true){setBtnDisabled(false);setText(feedbackEdit.item.text);setRating(feedbackEdit.item.rating);}},[feedbackEdit]);var handleTextChange=function handleTextChange(e){//when nothing is written in input no need to show any message\nif(text===''){setBtnDisabled(true);setMessage('');}else if(text!==''&&text.trim().length<=10){setBtnDisabled(true);setMessage('Please write text atleast 10 characters');}else{setBtnDisabled(false);setMessage('');}setText(e.target.value);};var handleSubmit=function handleSubmit(e){e.preventDefault();if(text.trim().length>10){var newFeedback={text:text,rating:rating};addFeedback(newFeedback);setText('');}};return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"How would you rate your service with us?\"}),/*#__PURE__*/_jsx(RatingSelect,{select:function select(rating){return setRating(rating);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Write a review\",onChange:handleTextChange,value:text}),/*#__PURE__*/_jsx(Button,{type:\"submit\",isDisabled:btnDisabled,children:\"Send\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message})]})});}export default FeedbackForm;","map":{"version":3,"names":["React","useState","useContext","useEffect","Card","Button","RatingSelect","FeedbackContext","FeedbackForm","text","setText","btnDisabled","setBtnDisabled","message","setMessage","rating","setRating","addFeedback","feedbackEdit","edit","item","handleTextChange","e","trim","length","target","value","handleSubmit","preventDefault","newFeedback"],"sources":["/media/chitts/8a6ff761-51df-41f4-b853-3a5fcd07a873/MERN/Dev_workspace/feedbackui/src/components/FeedbackForm.jsx"],"sourcesContent":["import React from 'react'\nimport {useState, useContext, useEffect} from 'react'\nimport Card from './shared/Card'\nimport Button from './shared/Button';\nimport RatingSelect from './RatingSelect';\nimport FeedbackContext from '../context/FeedbackContext';\n\nfunction FeedbackForm() {\n  \n\n  const [text , setText] = useState('');\n  const [btnDisabled , setBtnDisabled] = useState(true);\n  const [message , setMessage] = useState('');\n  const [rating , setRating] = useState(10);\n\n  const {addFeedback, feedbackEdit} = useContext(FeedbackContext);\n\n  useEffect(()=>\n  {\n    if(feedbackEdit.edit === true)\n    {\n      setBtnDisabled(false);\n      setText(feedbackEdit.item.text);\n      setRating(feedbackEdit.item.rating);\n\n    }\n  },[feedbackEdit]);\n\n\n  const handleTextChange = (e) =>{\n    //when nothing is written in input no need to show any message\n    if(text ==='')\n    {\n        setBtnDisabled(true);\n        setMessage('');\n    }\n    else if(text !== '' && text.trim().length <= 10)\n    {\n        setBtnDisabled(true);\n        setMessage('Please write text atleast 10 characters')\n    }\n    else\n    {\n        setBtnDisabled(false);\n        setMessage('');\n    }\n    setText(e.target.value);\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if(text.trim().length > 10)\n    {\n      const newFeedback = {\n        text,\n        rating,\n      }\n\n      addFeedback(newFeedback);\n      setText('');\n    }\n  }\n  return (\n    <Card>\n      <form onSubmit={handleSubmit}>\n        <h2>How would you rate your service with us?</h2>\n\n        <RatingSelect select={(rating) => setRating(rating)}/>\n        \n        <div className=\"input-group\">\n            <input type=\"text\" placeholder='Write a review' onChange={handleTextChange} value={text}/>\n            <Button type=\"submit\" isDisabled={btnDisabled}>Send</Button>\n        </div>\n        \n        {message && <div className='message'>{message}</div>}\n      \n      </form>\n    </Card>\n  )\n}\n\nexport default FeedbackForm\n"],"mappings":"sKAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAAQC,QAAR,CAAkBC,UAAlB,CAA8BC,SAA9B,KAA8C,OAA9C,CACA,MAAOC,KAAP,KAAiB,eAAjB,CACA,MAAOC,OAAP,KAAmB,iBAAnB,CACA,MAAOC,aAAP,KAAyB,gBAAzB,CACA,MAAOC,gBAAP,KAA4B,4BAA5B,C,wFAEA,QAASC,aAAT,EAAwB,CAGtB,cAAyBP,QAAQ,CAAC,EAAD,CAAjC,wCAAOQ,IAAP,eAAcC,OAAd,eACA,eAAuCT,QAAQ,CAAC,IAAD,CAA/C,yCAAOU,WAAP,eAAqBC,cAArB,eACA,eAA+BX,QAAQ,CAAC,EAAD,CAAvC,yCAAOY,OAAP,eAAiBC,UAAjB,eACA,eAA6Bb,QAAQ,CAAC,EAAD,CAArC,yCAAOc,MAAP,eAAgBC,SAAhB,eAEA,gBAAoCd,UAAU,CAACK,eAAD,CAA9C,CAAOU,WAAP,aAAOA,WAAP,CAAoBC,YAApB,aAAoBA,YAApB,CAEAf,SAAS,CAAC,UACV,CACE,GAAGe,YAAY,CAACC,IAAb,GAAsB,IAAzB,CACA,CACEP,cAAc,CAAC,KAAD,CAAd,CACAF,OAAO,CAACQ,YAAY,CAACE,IAAb,CAAkBX,IAAnB,CAAP,CACAO,SAAS,CAACE,YAAY,CAACE,IAAb,CAAkBL,MAAnB,CAAT,CAED,CACF,CATQ,CASP,CAACG,YAAD,CATO,CAAT,CAYA,GAAMG,iBAAgB,CAAG,QAAnBA,iBAAmB,CAACC,CAAD,CAAM,CAC7B;AACA,GAAGb,IAAI,GAAI,EAAX,CACA,CACIG,cAAc,CAAC,IAAD,CAAd,CACAE,UAAU,CAAC,EAAD,CAAV,CACH,CAJD,IAKK,IAAGL,IAAI,GAAK,EAAT,EAAeA,IAAI,CAACc,IAAL,GAAYC,MAAZ,EAAsB,EAAxC,CACL,CACIZ,cAAc,CAAC,IAAD,CAAd,CACAE,UAAU,CAAC,yCAAD,CAAV,CACH,CAJI,IAML,CACIF,cAAc,CAAC,KAAD,CAAd,CACAE,UAAU,CAAC,EAAD,CAAV,CACH,CACDJ,OAAO,CAACY,CAAC,CAACG,MAAF,CAASC,KAAV,CAAP,CACD,CAlBD,CAoBA,GAAMC,aAAY,CAAG,QAAfA,aAAe,CAACL,CAAD,CAAO,CAC1BA,CAAC,CAACM,cAAF,GACA,GAAGnB,IAAI,CAACc,IAAL,GAAYC,MAAZ,CAAqB,EAAxB,CACA,CACE,GAAMK,YAAW,CAAG,CAClBpB,IAAI,CAAJA,IADkB,CAElBM,MAAM,CAANA,MAFkB,CAApB,CAKAE,WAAW,CAACY,WAAD,CAAX,CACAnB,OAAO,CAAC,EAAD,CAAP,CACD,CACF,CAZD,CAaA,mBACE,KAAC,IAAD,wBACE,cAAM,QAAQ,CAAEiB,YAAhB,wBACE,gEADF,cAGE,KAAC,YAAD,EAAc,MAAM,CAAE,gBAACZ,MAAD,QAAYC,UAAS,CAACD,MAAD,CAArB,EAAtB,EAHF,cAKE,aAAK,SAAS,CAAC,aAAf,wBACI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,gBAA/B,CAAgD,QAAQ,CAAEM,gBAA1D,CAA4E,KAAK,CAAEZ,IAAnF,EADJ,cAEI,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,UAAU,CAAEE,WAAlC,kBAFJ,GALF,CAUGE,OAAO,eAAI,YAAK,SAAS,CAAC,SAAf,UAA0BA,OAA1B,EAVd,GADF,EADF,CAiBD,CAED,cAAeL,aAAf"},"metadata":{},"sourceType":"module"}